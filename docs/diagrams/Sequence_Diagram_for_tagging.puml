@startuml
title FitChasers – Auto-Tagging on /create_workout

skinparam shadowing false
skinparam ParticipantPadding 10
skinparam BoxPadding 6
skinparam ArrowColor #444
skinparam lifelineBorderColor #222
skinparam sequenceMessageAlign center
hide footbox

actor User as U
participant "FitChasers\n(main)" as FC
participant "WorkoutManager" as WM
participant "DefaultTagger" as DT
participant "Workout" as W
participant "UI" as UI

== User triggers create_workout ==
U -> FC: /create_workout n/NAME d/DD/MM/YY t/HHmm

FC -> WM: addWorkout(args)
activate WM

note right of WM
• Parse NAME/DATE/TIME (strict/non-strict)\n• Check duplicates / prompt for missing pieces\n• Confirm future dates/times
end note

WM -> W: new Workout(name, startDateTime)
activate W
W --> WM: (instance)
deactivate W

== Tag suggestion ==
WM -> DT: suggest(workout)
activate DT

DT -> W: getWorkoutName()
activate W
W --> DT: name (lowercased)
deactivate W

group match keywords
DT -> DT: match modality keywords\nDT -> DT: match muscle-group keywords
end group

DT --> WM: Set<String> tags
deactivate DT

WM -> W: setAutoTags(tags)
activate W
W --> WM: (ok)
deactivate W

== Persist & notify ==
WM -> UI: showMessage("Tags generated for workout: " + tags)
UI -> U: [left bubble] Tags generated for workout: [...]
WM -> UI: showMessage("Added workout: " + name)
UI -> U: [left bubble] Success

deactivate WM
@enduml
